import Head from "next/head";
import Image from "next/image";
import PostCard01 from "../components/PostCard_01";
import PostCard02 from "../components/PostCard_02";
import PostGrid02 from "../components/PostGrid_02";
import styles from "../styles/Home.module.css";

export default function Home({
  listpstu,
  listlit,
  listmetro,
  listmit,
  listsh,
  listcorriente,
}) {
  return (
    <div className={styles.container}>
      <Head>
        <title> Clipping do PSTU </title>{" "}
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>{" "}
      <main className={styles.main}>
        <h1> Clipping do PSTU </h1>{" "}
        <PostGrid02>
        {listpstu.map((item) => (
                       <PostCard02 
                       key = {item.id}
                       title = {item.title.rendered}
                       img = {item.jetpack_featured_media_url}
                       href = {item.link}
                       />
          ))}
        </PostGrid02>
        <br />
        <br />
        <br />
        <h1> Clipping da LIT - QI </h1>{" "}
        <div className={styles.gridposts}>
          {listlit.map((item) => (
            <PostCard01 
            key = {item.id}
              title = {item.title.rendered}
              img = {item.jetpack_featured_media_url}
              href = {item.link}
            />
          ))}{" "}
        </div>{" "}
        <br />
        <br />
        <br />
        <h1> Clipping dos Metrovi√°rios(SP) </h1>{" "}
        <div className={styles.gridposts}>
        {listmetro.map((item) => (
            <PostCard01 
              key = {item.id}
              title = {item.title.rendered}
              img = {item.jetpack_featured_media_url}
              href = {item.link}
            />
          ))}{" "}
        </div>{" "}
        <br />
        <br />
        <br />
        <h1> Clipping MIT(Chile) </h1>{" "}
        <PostGrid02>
        {listmit.map((item) => (
                       <PostCard02 
                       key = {item.id}
                       title = {item.title.rendered}
                       img = {item.jetpack_featured_media_url}
                       href = {item.link}
                       />
          ))}
        </PostGrid02>
        <br />
        <br />
        <br />
        <h1> Clipping Socialismo Hoy(Costa Rica) </h1>{" "}
        <PostGrid02>
        {listsh.map((item) => (
                       <PostCard02
                       key = {item.id}
                       title = {item.title.rendered}
                       img = {item.jetpack_featured_media_url}
                       href = {item.link}
                       />
          ))}
        </PostGrid02>
        <br />
        <br />
        <br />
        <h1> Clipping Corriente Roja(Estado Espanhol) </h1>{" "}
        <div className={styles.gridposts}>
          {listcorriente.map((item) => (
             <PostCard01 
             key = {item.id}
             title = {item.title.rendered}
             img = {item.jetpack_featured_media_url}
             href = {item.link}
           />
          ))}{" "}
        </div>{" "}
      </main>{" "}
    </div>
  );
}

export async function getServerSideProps() {
  const post = await fetch("https://clipping-next.vercel.app/api/posts_pstu");
  const postJson = await post.json();

  const postLit = await fetch("https://clipping-next.vercel.app/api/posts_lit");
  const postLitJson = await postLit.json();

  const postMetro = await fetch(
    "https://clipping-next.vercel.app/api/posts_metro"
  );
  const postMetroJson = await postMetro.json();

  const postMit = await fetch("https://clipping-next.vercel.app/api/posts_mit");
  const postMitJson = await postMit.json();

  const postSh = await fetch("https://clipping-next.vercel.app/api/posts_sh");
  const postShJson = await postSh.json();

  const postCorriente = await fetch(
    "https://clipping-next.vercel.app/api/posts_corriente"
  );
  const postCorrienteJson = await postCorriente.json();

  return {
    props: {
      listpstu: postJson.posts,
      listlit: postLitJson.posts,
      listmetro: postMetroJson.posts,
      listmit: postMitJson.posts,
      listsh: postShJson.posts,
      listcorriente: postCorrienteJson.posts,
    },
  };
}
